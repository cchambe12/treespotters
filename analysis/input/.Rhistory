numobs.eight <- subset(total.numobs.eight, total.numobs.eight$n>10) ## 66 Observers
roster <- read.csv("grouproster.csv", header=TRUE)
roster <- roster %>% dplyr::select(Person_ID, User_Name, Name) %>%
rename(observer = Person_ID)
total.numobs.eight$observer <- as.character(total.numobs.eight$observer)
roster$observer <- as.character(roster$observer)
total.numobs.eight <- full_join(total.numobs.eight, roster)
total.numobs.eight <- total.numobs.eight[order(-total.numobs.eight$n),]
total.numobs.eight <- total.numobs.eight[!is.na(total.numobs.eight$n),]
View(total.numobs.eight)
write.csv(total.numobs.six, file="observers2016.csv", row.names = FALSE)
write.csv(total.numobs.seven, file="observers2017.csv", row.names = FALSE)
write.csv(total.numobs.eight, file="observers2018.csv", row.names = FALSE)
ggplot(total.numobs.six) + geom_histogram()
ggplot(total.numobs.six) + geom_histogram(x=observer)
ggplot(total.numobs.six) + geom_histogram(aes(x=observer))
ggplot(total.numobs.six) + geom_histogram(aes(x=observer), stat="count")
cols <- colorRampPalette(brewer.pal(11,rev("RdBu")))
cols <- colorRampPalette(brewer.pal(11,rev("RdBu")))
hist<-ggplot(total.numobs.six, aes(x=observer)) + geom_histogram(binwidth = 20, color=cols, size=0.3) +
xlab("Observers") + ylab("Number of Observations") +
theme(panel.background = element_blank(), axis.line = element_line(colour = "black"),
legend.position = c(0.05,0.85), legend.text = element_text(size=8), legend.key.size = unit(0.5, "cm"),
axis.title=element_text(size=12), legend.title = element_text(size=8), axis.text=element_text(size=10))
hist
hist<-ggplot(total.numobs.six, aes(x=observer)) + geom_histogram(binwidth = 20, color=cols, size=0.3, stat="count") +
xlab("Observers") + ylab("Number of Observations") +
theme(panel.background = element_blank(), axis.line = element_line(colour = "black"),
legend.position = c(0.05,0.85), legend.text = element_text(size=8), legend.key.size = unit(0.5, "cm"),
axis.title=element_text(size=12), legend.title = element_text(size=8), axis.text=element_text(size=10))
hist
hist(total.numobs.six$observer)
hist<-ggplot(total.numobs.six, aes(x=n)) + geom_histogram(binwidth = 20, color=cols, size=0.3) +
xlab("Observers") + ylab("Number of Observations") +
theme(panel.background = element_blank(), axis.line = element_line(colour = "black"),
legend.position = c(0.05,0.85), legend.text = element_text(size=8), legend.key.size = unit(0.5, "cm"),
axis.title=element_text(size=12), legend.title = element_text(size=8), axis.text=element_text(size=10))
hist
hist<-ggplot(total.numobs.six, aes(x=n)) + geom_histogram(binwidth = 20, color=cols, size=0.3) +
xlab("Observers") + ylab("Number of Observations")
hist
hist<-ggplot(total.numobs.six, aes(x=n)) + geom_histogram(binwidth = 11, color=cols, size=0.3) +
xlab("Observers") + ylab("Number of Observations") +
theme(panel.background = element_blank(), axis.line = element_line(colour = "black"),
legend.position = c(0.05,0.85), legend.text = element_text(size=8), legend.key.size = unit(0.5, "cm"),
axis.title=element_text(size=12), legend.title = element_text(size=8), axis.text=element_text(size=10))
hist
hist<-ggplot(total.numobs.six, aes(x=n)) + geom_histogram(binwidth = 11, size=0.3) +
xlab("Observers") + ylab("Number of Observations") +
theme(panel.background = element_blank(), axis.line = element_line(colour = "black"),
legend.position = c(0.05,0.85), legend.text = element_text(size=8), legend.key.size = unit(0.5, "cm"),
axis.title=element_text(size=12), legend.title = element_text(size=8), axis.text=element_text(size=10))
hist
cols <- colorRampPalette(rev("RdBu"))
hist<-ggplot(total.numobs.six, aes(x=n)) + geom_histogram(binwidth = 11, size=0.3, color=cols) +
xlab("Number of Observations") + ylab("Number of Observers") +
theme(panel.background = element_blank(), axis.line = element_line(colour = "black"),
legend.position = c(0.05,0.85), legend.text = element_text(size=8), legend.key.size = unit(0.5, "cm"),
axis.title=element_text(size=12), legend.title = element_text(size=8), axis.text=element_text(size=10))
hist
hist<-ggplot(total.numobs.six, aes(x=n)) + geom_histogram(binwidth = 11, size=0.3, color=cols) +
xlab("Number of Observations") + ylab("Number of Observers")
hist
cols <- colorRampPalette(c("blue", "red"))
hist<-ggplot(total.numobs.six, aes(x=n)) + geom_histogram(binwidth = 11, size=0.3, color=cols) +
xlab("Number of Observations") + ylab("Number of Observers") +
theme(panel.background = element_blank(), axis.line = element_line(colour = "black"),
legend.position = c(0.05,0.85), legend.text = element_text(size=8), legend.key.size = unit(0.5, "cm"),
axis.title=element_text(size=12), legend.title = element_text(size=8), axis.text=element_text(size=10))
hist
hist<-ggplot(total.numobs.six, aes(x=n)) + geom_histogram(binwidth = 11, size=0.3, color=cols(20)) +
xlab("Number of Observations") + ylab("Number of Observers") +
theme(panel.background = element_blank(), axis.line = element_line(colour = "black"),
legend.position = c(0.05,0.85), legend.text = element_text(size=8), legend.key.size = unit(0.5, "cm"),
axis.title=element_text(size=12), legend.title = element_text(size=8), axis.text=element_text(size=10))
hist
hist<-ggplot(total.numobs.six, aes(x=n)) + geom_histogram(binwidth = 11, size=0.3, color=cols(33)) +
xlab("Number of Observations") + ylab("Number of Observers") +
theme(panel.background = element_blank(), axis.line = element_line(colour = "black"),
legend.position = c(0.05,0.85), legend.text = element_text(size=8), legend.key.size = unit(0.5, "cm"),
axis.title=element_text(size=12), legend.title = element_text(size=8), axis.text=element_text(size=10))
hist
hist<-ggplot(total.numobs.six, aes(x=n)) + geom_histogram(binwidth = 11, size=0.3, fill=cols(33)) +
xlab("Number of Observations") + ylab("Number of Observers") +
theme(panel.background = element_blank(), axis.line = element_line(colour = "black"),
legend.position = c(0.05,0.85), legend.text = element_text(size=8), legend.key.size = unit(0.5, "cm"),
axis.title=element_text(size=12), legend.title = element_text(size=8), axis.text=element_text(size=10))
hist
hist2017<-ggplot(total.numobs.seven, aes(x=n)) + geom_histogram(binwidth = 11, size=0.3, fill=cols(33)) +
xlab("Number of Observations") + ylab("Number of Observers") +
theme(panel.background = element_blank(), axis.line = element_line(colour = "black"),
legend.position = c(0.05,0.85), legend.text = element_text(size=8), legend.key.size = unit(0.5, "cm"),
axis.title=element_text(size=12), legend.title = element_text(size=8), axis.text=element_text(size=10))
hist2017
hist2017<-ggplot(total.numobs.seven, aes(x=n)) + geom_histogram(binwidth = 11, size=0.3, fill=cols(52)) +
xlab("Number of Observations") + ylab("Number of Observers") +
theme(panel.background = element_blank(), axis.line = element_line(colour = "black"),
legend.position = c(0.05,0.85), legend.text = element_text(size=8), legend.key.size = unit(0.5, "cm"),
axis.title=element_text(size=12), legend.title = element_text(size=8), axis.text=element_text(size=10))
hist2017
hist2018<-ggplot(total.numobs.eight, aes(x=n)) + geom_histogram(binwidth = 11, size=0.3, fill=cols(52)) +
xlab("Number of Observations") + ylab("Number of Observers") +
theme(panel.background = element_blank(), axis.line = element_line(colour = "black"),
legend.position = c(0.05,0.85), legend.text = element_text(size=8), legend.key.size = unit(0.5, "cm"),
axis.title=element_text(size=12), legend.title = element_text(size=8), axis.text=element_text(size=10))
hist2018
hist2018<-ggplot(total.numobs.eight, aes(x=n)) + geom_histogram(binwidth = 11, size=0.3, fill=cols(33)) +
xlab("Number of Observations") + ylab("Number of Observers") +
theme(panel.background = element_blank(), axis.line = element_line(colour = "black"),
legend.position = c(0.05,0.85), legend.text = element_text(size=8), legend.key.size = unit(0.5, "cm"),
axis.title=element_text(size=12), legend.title = element_text(size=8), axis.text=element_text(size=10))
hist2018
quartz()
ggarrange(hist2016, hist2017, hist2018)
hist2016<-ggplot(total.numobs.six, aes(x=n)) + geom_histogram(binwidth = 11, size=0.3, fill=cols(33)) +
xlab("Number of Observations") + ylab("Number of Observers") +
theme(panel.background = element_blank(), axis.line = element_line(colour = "black"),
legend.position = c(0.05,0.85), legend.text = element_text(size=8), legend.key.size = unit(0.5, "cm"),
axis.title=element_text(size=12), legend.title = element_text(size=8), axis.text=element_text(size=10))
ggarrange(hist2016, hist2017, hist2018)
ggarrange(hist2016, hist2017, hist2018, ncol=3)
colnames(b)
head(b)
df<-dplyr::select(b, ObservedBy_Person_ID, First_Yes_Year, First_Yes_DOY)
df[] <- lapply(df, gsub, pattern="'", replacement="")
df<-filter(df, First_Yes_Year==2016)
dsix<-df %>%
mutate(ObservedBy_Person_ID = strsplit(as.character(ObservedBy_Person_ID), ",")) %>%
unnest(ObservedBy_Person_ID)
total.numobs.six <- as.data.frame(table(sort(dsix$ObservedBy_Person_ID)))
total.numobs.six <- data.frame(observer=total.numobs.six$Var1, n=total.numobs.six$Freq)
numobs.six <- subset(total.numobs.six, total.numobs.six$n>40) ## 52 Observers
numobs.six
obsers.16 <- unique(numobs.six$observer)
numvisits <- total.numobs.six %>%
filter(observer %in% obsers.16) %>%
as.data.frame(table(sort(observer, First_Yes_DOY)))
df<-dplyr::select(b, ObservedBy_Person_ID, First_Yes_Year, First_Yes_DOY)
df[] <- lapply(df, gsub, pattern="'", replacement="")
df<-filter(df, First_Yes_Year==2016)
dsix<-df %>%
mutate(ObservedBy_Person_ID = strsplit(as.character(ObservedBy_Person_ID), ",")) %>%
unnest(ObservedBy_Person_ID)
total.numobs.six <- as.data.frame(table(sort(dsix$ObservedBy_Person_ID)))
total.numobs.six <- data.frame(observer=total.numobs.six$Var1, n=total.numobs.six$Freq)
numobs.six <- subset(total.numobs.six, total.numobs.six$n>40) ## 35 Observers
View(dsix)
numvisits <- dsix %>%
filter(observer %in% obsers.16) %>%
as.data.frame(table(sort(observer, First_Yes_DOY)))
numvisits <- dsix %>%
filter(ObservedBy_Person_ID %in% obsers.16) %>%
as.data.frame(table(sort(ObservedBy_Person_ID, First_Yes_DOY)))
View(dsix)
numvisits <- dsix %>%
filter(ObservedBy_Person_ID %in% obsers.16)
numvisits <- as.data.frame(table(sort(numvisits$ObservedBy_Person_ID, numvisits$First_Yes_DOY)))
numvisits <- as.data.frame(table(numvisits$ObservedBy_Person_ID, numvisits$First_Yes_DOY)))
numvisits <- as.data.frame(table(numvisits$ObservedBy_Person_ID, numvisits$First_Yes_DOY))
View(numvisits)
numvisits <- dsix %>%
filter(ObservedBy_Person_ID %in% obsers.16)
numvisits <- as.data.frame(table(numvisits$First_Yes_DOY, numvisits$ObservedBy_Person_ID))
View(numvisits)
View(numobs.six)
numvisits <- numvisits %>%
rename(DOY = Var1) %>%
rename(observer = Var2) %>%
rename(numobs = Freq) %>%
roster <- read.csv("grouproster.csv", header=TRUE)
numvisits <- numvisits %>%
rename(DOY = Var1) %>%
rename(observer = Var2) %>%
rename(numobs = Freq)
numvisits <- filter(numvisits, numobs>0)
numvisits$numdays <- ave(numvisits$observer, df[,c("observer")], FUN=length)
numvisits$numdays <- ave(numvisits$observer, numvisits[,c("observer")], FUN=length)
warnings
warnings()
numvisits <- dsix %>%
filter(ObservedBy_Person_ID %in% obsers.16) %>%
rename(DOY = First_Yes_DOY) %>%
rename(observer = ObservedBy_Person_ID)
numvisits$numdays <- ave(numvisits$observer, numvisits[,c("observer", "doy")], FUN=length)
numvisits <- dsix %>%
filter(ObservedBy_Person_ID %in% obsers.16) %>%
rename(doy = First_Yes_DOY) %>%
rename(observer = ObservedBy_Person_ID)
numvisits$numdays <- ave(numvisits$observer, numvisits[,c("observer", "doy")], FUN=length)
numvisits <- dsix %>%
filter(ObservedBy_Person_ID %in% obsers.16) %>%
rename(doy = First_Yes_DOY) %>%
rename(observer = ObservedBy_Person_ID) %>%
rename(year = First_Yes_Year)
numvisits$numdays <- ave(numvisits$observer, numvisits[,c("observer", "doy")], FUN=length)
numvisits$doy <- NULL
numvisits <- numvisits[!duplicated(numvisits),]
numvisits <- dsix %>%
filter(ObservedBy_Person_ID %in% obsers.16) %>%
rename(doy = First_Yes_DOY) %>%
rename(observer = ObservedBy_Person_ID) %>%
rename(year = First_Yes_Year)
numvisits$numdays <- ave(numvisits$observer, numvisits[,c("observer", "doy")], FUN=length)
numvisits <- subset(numvisits, numvisits$numdays>3)
View(numvisits)
numvisits$first <- ave(numvisits$doy, numvisits$observer, FUN=min)
numvisits$last <- ave(numvisits$doy, numvisits$observer, FUN=max)
numvisits$daysbtw <- numvisits$last - numvisits$last
numvisits$daysbtw <- numvisits$last - numvisits$first
class(numvisits$first)
numvisits$doy <- as.numeric(numvisits$doy)
numvisits$first <- ave(numvisits$doy, numvisits$observer, FUN=min)
numvisits$last <- ave(numvisits$doy, numvisits$observer, FUN=max)
numvisits$daysbtw <- numvisits$last - numvisits$first
numvisits$doy <- NULL
numvisits <- numvisits[!duplicated(numvisits),]
observers.16 <- full_join(numobs.six, numvisits.six)
numvisits.six <- dsix %>%
filter(ObservedBy_Person_ID %in% obsers.16) %>%
rename(doy = First_Yes_DOY) %>%
rename(observer = ObservedBy_Person_ID) %>%
rename(year = First_Yes_Year)
numvisits.six$numdays <- ave(numvisits.six$observer, numvisits.six[,c("observer", "doy")], FUN=length)
numvisits.six <- subset(numvisits.six, numvisits.six$numdays>3)
numvisits.six$doy <- as.numeric(numvisits.six$doy)
numvisits.six$first <- ave(numvisits.six$doy, numvisits.six$observer, FUN=min)
numvisits.six$last <- ave(numvisits.six$doy, numvisits.six$observer, FUN=max)
numvisits.six$daysbtw <- numvisits.six$last - numvisits.six$first
numvisits.six$doy <- NULL
numvisits.six <- numvisits.six[!duplicated(numvisits.six),]
observers.16 <- full_join(numobs.six, numvisits.six)
class(numobs.six$observer)
df<-dplyr::select(b, ObservedBy_Person_ID, First_Yes_Year, First_Yes_DOY)
df[] <- lapply(df, gsub, pattern="'", replacement="")
df<-filter(df, First_Yes_Year==2016)
dsix<-df %>%
mutate(ObservedBy_Person_ID = strsplit(as.character(ObservedBy_Person_ID), ",")) %>%
unnest(ObservedBy_Person_ID)
total.numobs.six <- as.data.frame(table(sort(dsix$ObservedBy_Person_ID)))
total.numobs.six <- data.frame(observer=total.numobs.six$Var1, n=total.numobs.six$Freq)
numobs.six <- subset(total.numobs.six, total.numobs.six$n>40) ## 35 Observers
numobs.six$observer <- as.character(numobs.six$observer)
numobs.six$n <- as.numeric(numobs.six$n)
totobservs <- unique(numobs.six$observer)
numvisits.six <- dsix %>%
filter(ObservedBy_Person_ID %in% totobservs) %>%
rename(doy = First_Yes_DOY) %>%
rename(observer = ObservedBy_Person_ID) %>%
rename(year = First_Yes_Year)
numvisits.six$numdays <- ave(numvisits.six$observer, numvisits.six[,c("observer", "doy")], FUN=length)
numvisits.six <- subset(numvisits.six, numvisits.six$numdays>3)
numvisits.six$doy <- as.numeric(numvisits.six$doy)
numvisits.six$first <- ave(numvisits.six$doy, numvisits.six$observer, FUN=min)
numvisits.six$last <- ave(numvisits.six$doy, numvisits.six$observer, FUN=max)
numvisits.six$daysbtw <- numvisits.six$last - numvisits.six$first
numvisits.six$doy <- NULL
numvisits.six <- numvisits.six[!duplicated(numvisits.six),]
observers.16 <- full_join(numobs.six, numvisits.six)
View(observers.16)
numvisits.six <- dsix %>%
filter(ObservedBy_Person_ID %in% totobservs) %>%
rename(doy = First_Yes_DOY) %>%
rename(observer = ObservedBy_Person_ID) %>%
rename(year = First_Yes_Year)
numvisits.six$numdays <- ave(numvisits.six$observer, numvisits.six$doy, FUN=length)
View(numobs.six)
View(numvisits.six)
numvisits.six$numdays <- ave(numvisits.six$doy, numvisits.six$observer, FUN=length)
check <- subset(numvisits.six, numvisits.six$observer == "19414")
View(check)
check <- check[!duplicated(check),]
numvisits.six <- dsix %>%
filter(ObservedBy_Person_ID %in% totobservs) %>%
rename(doy = First_Yes_DOY) %>%
rename(observer = ObservedBy_Person_ID) %>%
rename(year = First_Yes_Year)
numvisits.six <- numvisits.six[!duplicated(numvisits.six),]
numvisits.six$numdays <- ave(numvisits.six$doy, numvisits.six$observer, FUN=length)
numvisits.six <- subset(numvisits.six, numvisits.six$numdays>3)
numvisits.six$doy <- as.numeric(numvisits.six$doy)
numvisits.six$first <- ave(numvisits.six$doy, numvisits.six$observer, FUN=min)
numvisits.six$last <- ave(numvisits.six$doy, numvisits.six$observer, FUN=max)
numvisits.six$daysbtw <- numvisits.six$last - numvisits.six$first
numvisits.six$doy <- NULL
numvisits.six <- numvisits.six[!duplicated(numvisits.six),]
observers.16 <- full_join(numobs.six, numvisits.six)
numvisits.six <- dsix %>%
filter(ObservedBy_Person_ID %in% totobservs) %>%
rename(doy = First_Yes_DOY) %>%
rename(observer = ObservedBy_Person_ID) %>%
rename(year = First_Yes_Year)
numvisits.six <- numvisits.six[!duplicated(numvisits.six),]
numvisits.six$numdays <- ave(numvisits.six$doy, numvisits.six$observer, FUN=length)
#numvisits.six <- subset(numvisits.six, numvisits.six$numdays>3)
numvisits.six$doy <- as.numeric(numvisits.six$doy)
numvisits.six$first <- ave(numvisits.six$doy, numvisits.six$observer, FUN=min)
numvisits.six$last <- ave(numvisits.six$doy, numvisits.six$observer, FUN=max)
numvisits.six$daysbtw <- numvisits.six$last - numvisits.six$first
numvisits.six$doy <- NULL
numvisits.six <- numvisits.six[!duplicated(numvisits.six),]
observers.16 <- full_join(numobs.six, numvisits.six)
class(numvisits.six$numdays)
numvisits.six <- dsix %>%
filter(ObservedBy_Person_ID %in% totobservs) %>%
rename(doy = First_Yes_DOY) %>%
rename(observer = ObservedBy_Person_ID) %>%
rename(year = First_Yes_Year)
numvisits.six <- numvisits.six[!duplicated(numvisits.six),]
numvisits.six$numdays <- as.numeric(ave(numvisits.six$doy, numvisits.six$observer, FUN=length))
numvisits.six <- subset(numvisits.six, numvisits.six$numdays>3)
numvisits.six$doy <- as.numeric(numvisits.six$doy)
numvisits.six$first <- ave(numvisits.six$doy, numvisits.six$observer, FUN=min)
numvisits.six$last <- ave(numvisits.six$doy, numvisits.six$observer, FUN=max)
numvisits.six$daysbtw <- numvisits.six$last - numvisits.six$first
numvisits.six$doy <- NULL
numvisits.six <- numvisits.six[!duplicated(numvisits.six),]
observers.16 <- full_join(numobs.six, numvisits.six)
roster <- read.csv("grouproster.csv", header=TRUE)
roster <- roster %>% dplyr::select(Person_ID, User_Name, Name) %>%
rename(observer = Person_ID)
df<-dplyr::select(b, ObservedBy_Person_ID, First_Yes_Year, First_Yes_DOY)
df[] <- lapply(df, gsub, pattern="'", replacement="")
df<-filter(df, First_Yes_Year==2016)
dsix<-df %>%
mutate(ObservedBy_Person_ID = strsplit(as.character(ObservedBy_Person_ID), ",")) %>%
unnest(ObservedBy_Person_ID)
total.numobs.six <- as.data.frame(table(sort(dsix$ObservedBy_Person_ID)))
total.numobs.six <- data.frame(observer=total.numobs.six$Var1, n=total.numobs.six$Freq)
numobs.six <- subset(total.numobs.six, total.numobs.six$n>40) ## 35 Observers
numobs.six$observer <- as.character(numobs.six$observer)
numobs.six$n <- as.numeric(numobs.six$n)
totobservs <- unique(numobs.six$observer)
numvisits.six <- dsix %>%
filter(ObservedBy_Person_ID %in% totobservs) %>%
rename(doy = First_Yes_DOY) %>%
rename(observer = ObservedBy_Person_ID) %>%
rename(year = First_Yes_Year)
numvisits.six <- numvisits.six[!duplicated(numvisits.six),]
numvisits.six$numdays <- as.numeric(ave(numvisits.six$doy, numvisits.six$observer, FUN=length))
numvisits.six <- subset(numvisits.six, numvisits.six$numdays>3)
numvisits.six$doy <- as.numeric(numvisits.six$doy)
numvisits.six$first <- ave(numvisits.six$doy, numvisits.six$observer, FUN=min)
numvisits.six$last <- ave(numvisits.six$doy, numvisits.six$observer, FUN=max)
numvisits.six$daysbtw <- numvisits.six$last - numvisits.six$first
numvisits.six$doy <- NULL
numvisits.six <- numvisits.six[!duplicated(numvisits.six),]
observers.16 <- full_join(numobs.six, numvisits.six)
if(FALSE){
total.numobs.six$observer <- as.character(total.numobs.six$observer)
roster$observer <- as.character(roster$observer)
total.numobs.six <- full_join(total.numobs.six, roster)
total.numobs.six <- total.numobs.six[order(-total.numobs.six$n),]
total.numobs.six <- total.numobs.six[!is.na(total.numobs.six$n),]
#write.csv(total.numobs.six, file="observers2016.csv", row.names = FALSE)
dsix<-dsix[!duplicated(dsix),]
length(unique(dsix$ObservedBy_Person_ID))
# 62 = 2016
}
df<-dplyr::select(b, ObservedBy_Person_ID, First_Yes_Year)
df[] <- lapply(df, gsub, pattern="'", replacement="")
df<-filter(df, First_Yes_Year==2017)
dseven<-df %>%
mutate(ObservedBy_Person_ID = strsplit(as.character(ObservedBy_Person_ID), ",")) %>%
unnest(ObservedBy_Person_ID)
total.numobs.seven <- as.data.frame(table(sort(dseven$ObservedBy_Person_ID)))
total.numobs.seven <- data.frame(observer=total.numobs.seven$Var1, n=total.numobs.seven$Freq)
numobs.seven <- subset(total.numobs.seven, total.numobs.seven$n>40) ## 35 Observers
numobs.seven$observer <- as.character(numobs.seven$observer)
numobs.seven$n <- as.numeric(numobs.seven$n)
totobservs <- unique(numobs.seven$observer)
numvisits.seven <- dseven %>%
filter(ObservedBy_Person_ID %in% totobservs) %>%
rename(doy = First_Yes_DOY) %>%
rename(observer = ObservedBy_Person_ID) %>%
rename(year = First_Yes_Year)
numvisits.seven <- numvisits.seven[!duplicated(numvisits.seven),]
numvisits.seven$numdays <- as.numeric(ave(numvisits.seven$doy, numvisits.seven$observer, FUN=length))
numvisits.seven <- subset(numvisits.seven, numvisits.seven$numdays>3)
numvisits.seven$doy <- as.numeric(numvisits.seven$doy)
numvisits.seven$first <- ave(numvisits.seven$doy, numvisits.seven$observer, FUN=min)
numvisits.seven$last <- ave(numvisits.seven$doy, numvisits.seven$observer, FUN=max)
numvisits.seven$daysbtw <- numvisits.seven$last - numvisits.seven$first
numvisits.seven$doy <- NULL
numvisits.seven <- numvisits.seven[!duplicated(numvisits.seven),]
observers.17 <- full_join(numobs.seven, numvisits.seven)
if(FALSE){
total.numobs.seven$observer <- as.character(total.numobs.seven$observer)
roster$observer <- as.character(roster$observer)
total.numobs.seven <- full_join(total.numobs.seven, roster)
total.numobs.seven <- total.numobs.seven[order(-total.numobs.seven$n),]
total.numobs.seven <- total.numobs.seven[!is.na(total.numobs.seven$n),]
#write.csv(total.numobs.seven, file="observers2017.csv", row.names = FALSE)
dseven<-dseven[!duplicated(dseven),]
length(unique(dseven$ObservedBy_Person_ID))
# 74 = 2017
}
df<-dplyr::select(b, ObservedBy_Person_ID, First_Yes_Year)
df[] <- lapply(df, gsub, pattern="'", replacement="")
df<-filter(df, First_Yes_Year==2018)
deight<-df %>%
mutate(ObservedBy_Person_ID = strsplit(as.character(ObservedBy_Person_ID), ",")) %>%
unnest(ObservedBy_Person_ID)
total.numobs.eight <- as.data.frame(table(sort(deight$ObservedBy_Person_ID)))
total.numobs.eight <- data.frame(observer=total.numobs.eight$Var1, n=total.numobs.eight$Freq)
numobs.eight <- subset(total.numobs.eight, total.numobs.eight$n>40) ## 35 Observers
numobs.eight$observer <- as.character(numobs.eight$observer)
numobs.eight$n <- as.numeric(numobs.eight$n)
totobservs <- unique(numobs.eight$observer)
numvisits.eight <- deight %>%
filter(ObservedBy_Person_ID %in% totobservs) %>%
rename(doy = First_Yes_DOY) %>%
rename(observer = ObservedBy_Person_ID) %>%
rename(year = First_Yes_Year)
numvisits.eight <- numvisits.eight[!duplicated(numvisits.eight),]
numvisits.eight$numdays <- as.numeric(ave(numvisits.eight$doy, numvisits.eight$observer, FUN=length))
numvisits.eight <- subset(numvisits.eight, numvisits.eight$numdays>3)
numvisits.eight$doy <- as.numeric(numvisits.eight$doy)
numvisits.eight$first <- ave(numvisits.eight$doy, numvisits.eight$observer, FUN=min)
numvisits.eight$last <- ave(numvisits.eight$doy, numvisits.eight$observer, FUN=max)
numvisits.eight$daysbtw <- numvisits.eight$last - numvisits.eight$first
numvisits.eight$doy <- NULL
numvisits.eight <- numvisits.eight[!duplicated(numvisits.eight),]
observers.18 <- full_join(numobs.eight, numvisits.eight)
roster <- read.csv("grouproster.csv", header=TRUE)
roster <- roster %>% dplyr::select(Person_ID, User_Name, Name) %>%
rename(observer = Person_ID)
df<-dplyr::select(b, ObservedBy_Person_ID, First_Yes_Year, First_Yes_DOY)
df[] <- lapply(df, gsub, pattern="'", replacement="")
df<-filter(df, First_Yes_Year==2017)
dseven<-df %>%
mutate(ObservedBy_Person_ID = strsplit(as.character(ObservedBy_Person_ID), ",")) %>%
unnest(ObservedBy_Person_ID)
total.numobs.seven <- as.data.frame(table(sort(dseven$ObservedBy_Person_ID)))
total.numobs.seven <- data.frame(observer=total.numobs.seven$Var1, n=total.numobs.seven$Freq)
numobs.seven <- subset(total.numobs.seven, total.numobs.seven$n>40) ## 35 Observers
numobs.seven$observer <- as.character(numobs.seven$observer)
numobs.seven$n <- as.numeric(numobs.seven$n)
totobservs <- unique(numobs.seven$observer)
numvisits.seven <- dseven %>%
filter(ObservedBy_Person_ID %in% totobservs) %>%
rename(doy = First_Yes_DOY) %>%
rename(observer = ObservedBy_Person_ID) %>%
rename(year = First_Yes_Year)
numvisits.seven <- numvisits.seven[!duplicated(numvisits.seven),]
numvisits.seven$numdays <- as.numeric(ave(numvisits.seven$doy, numvisits.seven$observer, FUN=length))
numvisits.seven <- subset(numvisits.seven, numvisits.seven$numdays>3)
numvisits.seven$doy <- as.numeric(numvisits.seven$doy)
numvisits.seven$first <- ave(numvisits.seven$doy, numvisits.seven$observer, FUN=min)
numvisits.seven$last <- ave(numvisits.seven$doy, numvisits.seven$observer, FUN=max)
numvisits.seven$daysbtw <- numvisits.seven$last - numvisits.seven$first
numvisits.seven$doy <- NULL
numvisits.seven <- numvisits.seven[!duplicated(numvisits.seven),]
observers.17 <- full_join(numobs.seven, numvisits.seven)
if(FALSE){
total.numobs.seven$observer <- as.character(total.numobs.seven$observer)
roster$observer <- as.character(roster$observer)
total.numobs.seven <- full_join(total.numobs.seven, roster)
total.numobs.seven <- total.numobs.seven[order(-total.numobs.seven$n),]
total.numobs.seven <- total.numobs.seven[!is.na(total.numobs.seven$n),]
#write.csv(total.numobs.seven, file="observers2017.csv", row.names = FALSE)
dseven<-dseven[!duplicated(dseven),]
length(unique(dseven$ObservedBy_Person_ID))
# 74 = 2017
}
df<-dplyr::select(b, ObservedBy_Person_ID, First_Yes_Year, First_Yes_DOY)
df[] <- lapply(df, gsub, pattern="'", replacement="")
df<-filter(df, First_Yes_Year==2018)
deight<-df %>%
mutate(ObservedBy_Person_ID = strsplit(as.character(ObservedBy_Person_ID), ",")) %>%
unnest(ObservedBy_Person_ID)
total.numobs.eight <- as.data.frame(table(sort(deight$ObservedBy_Person_ID)))
total.numobs.eight <- data.frame(observer=total.numobs.eight$Var1, n=total.numobs.eight$Freq)
numobs.eight <- subset(total.numobs.eight, total.numobs.eight$n>40) ## 35 Observers
numobs.eight$observer <- as.character(numobs.eight$observer)
numobs.eight$n <- as.numeric(numobs.eight$n)
totobservs <- unique(numobs.eight$observer)
numvisits.eight <- deight %>%
filter(ObservedBy_Person_ID %in% totobservs) %>%
rename(doy = First_Yes_DOY) %>%
rename(observer = ObservedBy_Person_ID) %>%
rename(year = First_Yes_Year)
numvisits.eight <- numvisits.eight[!duplicated(numvisits.eight),]
numvisits.eight$numdays <- as.numeric(ave(numvisits.eight$doy, numvisits.eight$observer, FUN=length))
numvisits.eight <- subset(numvisits.eight, numvisits.eight$numdays>3)
numvisits.eight$doy <- as.numeric(numvisits.eight$doy)
numvisits.eight$first <- ave(numvisits.eight$doy, numvisits.eight$observer, FUN=min)
numvisits.eight$last <- ave(numvisits.eight$doy, numvisits.eight$observer, FUN=max)
numvisits.eight$daysbtw <- numvisits.eight$last - numvisits.eight$first
numvisits.eight$doy <- NULL
numvisits.eight <- numvisits.eight[!duplicated(numvisits.eight),]
observers.18 <- full_join(numobs.eight, numvisits.eight)
roster <- read.csv("grouproster.csv", header=TRUE)
roster <- roster %>% dplyr::select(Person_ID, User_Name, Name) %>%
rename(observer = Person_ID)
allobsers <- full_join(observers.16, observers.17)
allobsers <- full_join(allobsers, observers.18)
allobsers <- full_join(allobsers, roster)
roster$observer <- as.character(roster$observer)
allobsers <- full_join(allobsers, roster)
View(allobsers)
allobsers$totalobs <- ave(allobsers$n, allobsers$observer, FUN=sum)
allobsers$totyears <- ave(allobsers$year, allobsers$observer, FUN=sum)
allobsers$year <- as.numeric(allobsers$year)
allobsers$totyears <- ave(allobsers$year, allobsers$observer, FUN=sum)
allobsers$totyears <- ave(allobsers$year, allobsers$observer, FUN=length)
allobsers <- allobsers[!is.na(allobsers$n),]
table(allobsers$totyears)
cols <- colorRampPalette(brewer.pal(3, "Set1"))
histtotal<-ggplot(allobsers, aes(x=n)) + geom_histogram(binwidth = 11, size=0.3, aes(fill=year)) +
scale_fill_manual(values=cols, name="Year",
labels=c("2016","2017", "2018"))
histtotal
